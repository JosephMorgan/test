<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>JSON格式化</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
</head>
<body>


<div class="layui-form-item">
    <laber class="layui-form-label">参数内容：</laber>
    <button type="button" class="layui-btn layui-btn-sm" id="json_btn">JSON格式化</button>
    <div class="layui-input-block" contenteditable="true">
        <textarea id="param" placeholder="请输入内容" class="layui-textarea"></textarea>
    </div>
</div>

<script src="./layui/layui.js" type="text/javascript"></script>
<script>
    //一般直接写在一个js文件中
    layui.use(['layer', 'form','jquery'], function(){
        var layer = layui.layer
            ,form = layui.form
            ,$ = layui.jquery;

        $("#json_btn").click(function () {
            var  stringContent = $("#param").val();
            if(stringContent == "") {
                layer.msg('参数内容不能为空',{icon:6});
            } else {
                    //var transferContent = stringContent.replace(/[\r]/g, "\\r").replace(/[\n]/g, "\\n");
                    //var str = stringContent.replace(/\n/g,"");

                try {
                    var jsonContent = JSON.stringify(JSON.parse(stringContent),null,4);
                    console.log("运行后结果");
                    console.log(jsonContent);
                    $("#param").val(jsonContent);
                } catch (e) {
                    layer.msg('参数内容应为json格式',{icon: 6});
                }



            }

        });
    });
</script>
<script src='./layui/autosize.js'></script>
<script>
    autosize(document.querySelectorAll('textarea'));
</script>
</body>
</html>